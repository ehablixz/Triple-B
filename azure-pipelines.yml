trigger:
- main

pool:
  vmImage: 'windows-latest'  # Für .NET-Framework/.NET Core auf Windows

variables:
  buildConfiguration: 'Release'

steps:
# 1. Code aus dem Repository holen
- task: Checkout@1

# 2. .NET-Projekt wiederherstellen
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '7.0.x'   # Passe die .NET-Version an dein Projekt an

- script: dotnet restore
  displayName: 'Restore NuGet Packages'

# 3. Projekt bauen
- script: dotnet build --configuration $(buildConfiguration)
  displayName: 'Build Project'

# 4. Tests ausführen
- script: dotnet test --configuration $(buildConfiguration) --no-build --verbosity normal
  displayName: 'Run Unit Tests'

# 5. Optional: Artefakte erstellen (z. B. für Deployment)
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'drop'
    publishLocation: 'Container'
